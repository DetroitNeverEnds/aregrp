# Интернационализация (i18n)

## Обзор

В проекте настроена интернационализация с использованием библиотек `i18next` и `react-i18next`. Поддерживаются языки: русский (ru) и английский (en).

## Структура файлов

```
frontend/
├── src/
│   ├── i18n/
│   │   └── config.ts          # Конфигурация i18n
│   └── locales/
│       ├── ru/
│       │   └── translation.json  # Русские переводы
│       └── en/
│           └── translation.json  # Английские переводы
```

## Конфигурация

Конфигурация i18n находится в [`src/i18n/config.ts`](src/i18n/config.ts):

- **Язык по умолчанию**: русский (ru)
- **Определение языка**: автоматическое определение из localStorage или браузера
- **Кэширование**: выбранный язык сохраняется в localStorage

## Использование в компонентах

### Базовое использование

```tsx
import { useTranslation } from 'react-i18next';

function MyComponent() {
    const { t } = useTranslation();

    return (
        <div>
            <h1>{t('app.title')}</h1>
        </div>
    );
}
```

### Переводы с параметрами

```tsx
const { t } = useTranslation();

// В translation.json: "count": "счётчик {{count}}"
<p>{t('app.count', { count: 5 })}</p>;
```

### Смена языка

```tsx
import { useTranslation } from 'react-i18next';

function LanguageSwitcher() {
    const { i18n } = useTranslation();

    const changeLanguage = (lng: string) => {
        i18n.changeLanguage(lng);
    };

    return (
        <div>
            <button onClick={() => changeLanguage('ru')}>Русский</button>
            <button onClick={() => changeLanguage('en')}>English</button>
        </div>
    );
}
```

### Получение текущего языка

```tsx
const { i18n } = useTranslation();
const currentLanguage = i18n.language; // 'ru' или 'en'
```

## Добавление новых переводов

### 1. Добавьте ключи в файлы переводов

**`src/locales/ru/translation.json`**:

```json
{
    "newSection": {
        "title": "Новый заголовок",
        "description": "Описание"
    }
}
```

**`src/locales/en/translation.json`**:

```json
{
    "newSection": {
        "title": "New Title",
        "description": "Description"
    }
}
```

### 2. Используйте в компонентах

```tsx
const { t } = useTranslation();

<h1>{t('newSection.title')}</h1>
<p>{t('newSection.description')}</p>
```

## Добавление нового языка

### 1. Создайте файл перевода

Создайте новый файл `src/locales/[код_языка]/translation.json`:

```json
{
    "welcome": "Welcome",
    "app": {
        "title": "My App"
    }
}
```

### 2. Обновите конфигурацию

В [`src/i18n/config.ts`](src/i18n/config.ts) добавьте импорт и ресурс:

```typescript
import translationDE from '../locales/de/translation.json';

const resources = {
    en: { translation: translationEN },
    ru: { translation: translationRU },
    de: { translation: translationDE }, // Новый язык
};
```

## Лучшие практики

1. **Структурируйте ключи**: Используйте вложенные объекты для группировки связанных переводов

    ```json
    {
        "auth": {
            "login": "Войти",
            "logout": "Выйти"
        }
    }
    ```

2. **Используйте параметры**: Для динамических значений используйте интерполяцию

    ```json
    {
        "greeting": "Привет, {{name}}!"
    }
    ```

3. **Синхронизируйте языки**: Убедитесь, что все ключи присутствуют во всех языковых файлах

4. **Избегайте хардкода**: Весь текст должен быть в файлах переводов, а не в коде

## Типизация (опционально)

Для улучшения типобезопасности можно создать типы для ключей переводов:

```typescript
// src/i18n/types.ts
import type translation from '../locales/ru/translation.json';

export type TranslationKeys = typeof translation;
```

## Отладка

Для включения режима отладки измените в [`src/i18n/config.ts`](src/i18n/config.ts):

```typescript
i18n.init({
    // ...
    debug: true, // Включить логирование
});
```

## Полезные ссылки

- [Документация i18next](https://www.i18next.com/)
- [Документация react-i18next](https://react.i18next.com/)
- [i18next-browser-languagedetector](https://github.com/i18next/i18next-browser-languageDetector)
